"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getComponentDataFromAST = void 0;
const tsquery_1 = require("@phenomnomnominal/tsquery");
function getComponentDataFromAST(tree, normalizedComponentPath) {
    const COMPONENT_CONTENT_SELECTOR = 'ClassDeclaration:has(Decorator > CallExpression:has(Identifier[name=Component]))';
    const COMPONENT_NAME_SELECTOR = 'ClassDeclaration:has(Decorator > CallExpression:has(Identifier[name=Component])) > Identifier';
    const componentFileContents = tree.read(normalizedComponentPath, 'utf-8');
    const componentAST = tsquery_1.tsquery.ast(componentFileContents);
    const componentNode = (0, tsquery_1.tsquery)(componentAST, COMPONENT_CONTENT_SELECTOR, {
        visitAllChildren: true,
    })[0];
    const componentContents = componentFileContents.slice(componentNode.getStart(), componentNode.getEnd());
    const componentNameNode = (0, tsquery_1.tsquery)(tsquery_1.tsquery.ast(componentContents), COMPONENT_NAME_SELECTOR, { visitAllChildren: true })[0];
    const componentName = componentNameNode.getText();
    return { componentFileContents, componentAST, componentName };
}
exports.getComponentDataFromAST = getComponentDataFromAST;
//# sourceMappingURL=get-component-data-from-ast.js.map