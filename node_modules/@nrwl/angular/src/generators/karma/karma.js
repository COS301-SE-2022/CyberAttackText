"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.karmaGenerator = void 0;
const devkit_1 = require("@nrwl/devkit");
const versions_1 = require("../../utils/versions");
function karmaGenerator(tree, options) {
    const packageJson = (0, devkit_1.readJson)(tree, 'package.json');
    if (!tree.exists('karma.conf.js')) {
        (0, devkit_1.generateFiles)(tree, (0, devkit_1.joinPathFragments)(__dirname, 'files'), '.', {
            tmpl: '',
        });
    }
    if (options.skipPackageJson || packageJson.devDependencies['karma']) {
        return () => { };
    }
    return (0, devkit_1.addDependenciesToPackageJson)(tree, {}, {
        karma: versions_1.karmaVersion,
        'karma-chrome-launcher': versions_1.karmaChromeLauncherVersion,
        'karma-coverage': versions_1.karmaCoverageVersion,
        'karma-jasmine': versions_1.karmaJasmineVersion,
        'karma-jasmine-html-reporter': versions_1.karmaJasmineHtmlReporterVersion,
        'jasmine-core': versions_1.jasmineCoreVersion,
        'jasmine-spec-reporter': versions_1.jasmineSpecReporterVersion,
        '@types/jasmine': versions_1.typesJasmineVersion,
        '@types/node': versions_1.typesNodeVersion,
    });
}
exports.karmaGenerator = karmaGenerator;
exports.default = karmaGenerator;
//# sourceMappingURL=karma.js.map