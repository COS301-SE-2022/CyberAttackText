const a5_0x13b2=['response','Completed\x20run\x20group\x20with\x20an\x20error','/nx-cloud/executions/complete-run-group','data','../../../utilities/metric-logger','recordMetric','VERBOSE_LOGGING','createMetricRecorder','completeRunGroup','../../../utilities/axios','__awaiter','done','RUNNER_FAILURE_PERF_ENTRY','throw','apiAxiosInstance','agentName','error:\x20','axiosMultipleTries','../../../utilities/nx-imports','axiosException','mapRespToPerfEntry','tasks','DistributedAgentApi','__esModule','dtePollTasks','value','/nx-cloud/executions/tasks','post','next','apply','defineProperty','note','runGroup'];(function(_0x1b8aac,_0x13b26b){const _0x34a203=function(_0x18aca9){while(--_0x18aca9){_0x1b8aac['push'](_0x1b8aac['shift']());}};_0x34a203(++_0x13b26b);}(a5_0x13b2,0xd7));const a5_0x34a2=function(_0x1b8aac,_0x13b26b){_0x1b8aac=_0x1b8aac-0x0;let _0x34a203=a5_0x13b2[_0x1b8aac];return _0x34a203;};'use strict';var __awaiter=this&&this[a5_0x34a2('0x1a')]||function(_0x241a99,_0x5c75b4,_0x59b324,_0x409eeb){function _0x230be3(_0x15a62d){return _0x15a62d instanceof _0x59b324?_0x15a62d:new _0x59b324(function(_0x2c3272){_0x2c3272(_0x15a62d);});}return new(_0x59b324||(_0x59b324=Promise))(function(_0x21370e,_0x2cb83e){function _0x458dcf(_0x4876a4){try{_0x4061f8(_0x409eeb[a5_0x34a2('0xb')](_0x4876a4));}catch(_0x222271){_0x2cb83e(_0x222271);}}function _0x20cc71(_0x3b353d){try{_0x4061f8(_0x409eeb[a5_0x34a2('0x1d')](_0x3b353d));}catch(_0x570971){_0x2cb83e(_0x570971);}}function _0x4061f8(_0x122a6b){_0x122a6b[a5_0x34a2('0x1b')]?_0x21370e(_0x122a6b[a5_0x34a2('0x8')]):_0x230be3(_0x122a6b[a5_0x34a2('0x8')])['then'](_0x458dcf,_0x20cc71);}_0x4061f8((_0x409eeb=_0x409eeb[a5_0x34a2('0xc')](_0x241a99,_0x5c75b4||[]))[a5_0x34a2('0xb')]());});};Object[a5_0x34a2('0xd')](exports,a5_0x34a2('0x6'),{'value':!![]});exports[a5_0x34a2('0x5')]=void 0x0;const axios_1=require(a5_0x34a2('0x19'));const environment_1=require('../../../utilities/environment');const metric_logger_1=require(a5_0x34a2('0x14'));const {output}=require(a5_0x34a2('0x1'));class DistributedAgentApi{constructor(_0x485319,_0x1f8f2d,_0x56e39f){this[a5_0x34a2('0xf')]=_0x1f8f2d;this[a5_0x34a2('0x1f')]=_0x56e39f;this[a5_0x34a2('0x1e')]=(0x0,axios_1['createApiAxiosInstance'])(_0x485319);}[a5_0x34a2('0x4')](_0x2ab015,_0x40ac1a,_0xff1e50){var _0x402c23;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4d3361=(0x0,metric_logger_1[a5_0x34a2('0x17')])(a5_0x34a2('0x7'));try{const _0x58eb65=yield(0x0,axios_1['axiosMultipleTries'])(()=>this['apiAxiosInstance'][a5_0x34a2('0xa')](a5_0x34a2('0x9'),{'runGroup':this['runGroup'],'agentName':this['agentName'],'executionId':_0x2ab015,'statusCode':_0x40ac1a,'completedTasks':_0xff1e50}));_0x4d3361[a5_0x34a2('0x15')]((0x0,metric_logger_1[a5_0x34a2('0x3')])(_0x58eb65));return _0x58eb65[a5_0x34a2('0x13')];}catch(_0x2e7a82){_0x4d3361[a5_0x34a2('0x15')](((_0x402c23=_0x2e7a82===null||_0x2e7a82===void 0x0?void 0x0:_0x2e7a82[a5_0x34a2('0x2')])===null||_0x402c23===void 0x0?void 0x0:_0x402c23[a5_0x34a2('0x10')])?(0x0,metric_logger_1[a5_0x34a2('0x3')])(_0x2e7a82[a5_0x34a2('0x2')][a5_0x34a2('0x10')]):metric_logger_1[a5_0x34a2('0x1c')]);throw _0x2e7a82;}});}['completeRunGroupWithError'](_0x4baa96){var _0x41b68d;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a5_0x34a2('0x16')]){output['note']({'title':'Completing\x20run\x20group\x20with\x20an\x20error','bodyLines':['runGroup:\x20'+this[a5_0x34a2('0xf')],a5_0x34a2('0x20')+_0x4baa96]});}const _0x74d496=(0x0,metric_logger_1[a5_0x34a2('0x17')])(a5_0x34a2('0x18'));try{const _0x90a79d=yield(0x0,axios_1[a5_0x34a2('0x0')])(()=>this[a5_0x34a2('0x1e')][a5_0x34a2('0xa')](a5_0x34a2('0x12'),{'runGroup':this[a5_0x34a2('0xf')],'agentName':this[a5_0x34a2('0x1f')],'criticalErrorMessage':_0x4baa96}));if(environment_1[a5_0x34a2('0x16')]){output[a5_0x34a2('0xe')]({'title':a5_0x34a2('0x11')});}_0x74d496['recordMetric']((0x0,metric_logger_1[a5_0x34a2('0x3')])(_0x90a79d));}catch(_0x30e30a){_0x74d496[a5_0x34a2('0x15')](((_0x41b68d=_0x30e30a===null||_0x30e30a===void 0x0?void 0x0:_0x30e30a['axiosException'])===null||_0x41b68d===void 0x0?void 0x0:_0x41b68d[a5_0x34a2('0x10')])?(0x0,metric_logger_1[a5_0x34a2('0x3')])(_0x30e30a[a5_0x34a2('0x2')][a5_0x34a2('0x10')]):metric_logger_1[a5_0x34a2('0x1c')]);console['error'](_0x30e30a);}});}}exports[a5_0x34a2('0x5')]=DistributedAgentApi;