const a8_0x2096=['./node_modules/.cache/nx','commandStatus','./task-graph-creator','assign','values','strictlyOrderedTargets','error:\x20','endTask','executionId:\x20','message','run','exit','FileStorage','criticalErrorMessage','length','./split-task-graph-into-stages','SIGINT','target','Waiting...','addVerticalSeparator','get','next','configuration','\x20seconds.','runUrl','../../../utilities/nx-imports','find','__esModule','hash','error','Found\x20unknown\x20task:\x20','executionStatus:\x20','completedTasks','nodes','Starting\x20distributed\x20command\x20execution','push','createStartRequest','log','Error:','Status\x20update','NO_COMPLETED_TASKS_TIMEOUT','completeRunGroupWithError','wait','submitRunMetrics','Successfully\x20completed\x20running\x20the\x20command.','SIGTERM','Main\x20job\x20was\x20terminated\x20via\x20SIGTERM','Main\x20job\x20was\x20terminated\x20via\x20SIGINT','TaskGraphCreator','VERBOSE_LOGGING','./distributed-execution.api','apply','../../../utilities/waiter','printRunGroupError','defineProperty','lifeCycle','logCommand','See\x20run\x20details\x20at\x20','success','terminalOutput','Command\x20execution\x20failed.','ErrorReporterApi','throw','targetDependencies','note','encryptionKey','ENCRYPTION_KEY','Distributed\x20Execution\x20Terminated','Extracting\x20artifacts','start','url','build','Waiter','splitTasksIntoStages','project','../../../utilities/create-unchanged-value-timeout','../../../utilities/environment','No\x20new\x20completed\x20tasks\x20after\x20','E2EEncryption','../../file-storage/file-storage','getRunGroup','status','scheduleTask','taskGraph','startTask','copyFilesFromCache','axiosException','../../../utilities/metric-logger','toString','value','serializeOverrides','../../error/print-run-group-error','__awaiter','nxCloudDistributedTasksRunner','projectGraph','Unable\x20to\x20complete\x20a\x20run.','executionStatus','cacheDirectory','dependencies','../../api/error-reporter.api','strip-json-comments','retrieve','Main\x20job\x20terminated\x20with\x20an\x20error:\x20\x22','../../file-storage/e2e-encryption','number\x20of\x20completed\x20tasks:\x20','taskId'];(function(_0x520d77,_0x2096f4){const _0xb4f54e=function(_0x66bde8){while(--_0x66bde8){_0x520d77['push'](_0x520d77['shift']());}};_0xb4f54e(++_0x2096f4);}(a8_0x2096,0x1bd));const a8_0xb4f5=function(_0x520d77,_0x2096f4){_0x520d77=_0x520d77-0x0;let _0xb4f54e=a8_0x2096[_0x520d77];return _0xb4f54e;};'use strict';var __awaiter=this&&this[a8_0xb4f5('0x47')]||function(_0x39d688,_0x40c92a,_0x190a7e,_0xabf661){function _0x49ec58(_0x3ceead){return _0x3ceead instanceof _0x190a7e?_0x3ceead:new _0x190a7e(function(_0x4933de){_0x4933de(_0x3ceead);});}return new(_0x190a7e||(_0x190a7e=Promise))(function(_0x291991,_0x33f863){function _0x145980(_0x5617cb){try{_0x5a2557(_0xabf661[a8_0xb4f5('0x0')](_0x5617cb));}catch(_0x3a1b96){_0x33f863(_0x3a1b96);}}function _0x549a1e(_0x461f39){try{_0x5a2557(_0xabf661[a8_0xb4f5('0x29')](_0x461f39));}catch(_0x172ad6){_0x33f863(_0x172ad6);}}function _0x5a2557(_0x14f948){_0x14f948['done']?_0x291991(_0x14f948[a8_0xb4f5('0x44')]):_0x49ec58(_0x14f948[a8_0xb4f5('0x44')])['then'](_0x145980,_0x549a1e);}_0x5a2557((_0xabf661=_0xabf661[a8_0xb4f5('0x1e')](_0x39d688,_0x40c92a||[]))[a8_0xb4f5('0x0')]());});};Object[a8_0xb4f5('0x21')](exports,a8_0xb4f5('0x6'),{'value':!![]});exports[a8_0xb4f5('0x48')]=void 0x0;const fs_1=require('fs');const stripJsonComments=require(a8_0xb4f5('0x4f'));const create_unchanged_value_timeout_1=require(a8_0xb4f5('0x36'));const environment_1=require(a8_0xb4f5('0x37'));const metric_logger_1=require(a8_0xb4f5('0x42'));const serializer_overrides_1=require('../../../utilities/serializer-overrides');const waiter_1=require(a8_0xb4f5('0x1f'));const error_reporter_api_1=require(a8_0xb4f5('0x4e'));const print_run_group_error_1=require(a8_0xb4f5('0x46'));const e2e_encryption_1=require(a8_0xb4f5('0x52'));const file_storage_1=require(a8_0xb4f5('0x3a'));const distributed_execution_api_1=require(a8_0xb4f5('0x1d'));const split_task_graph_into_stages_1=require(a8_0xb4f5('0x64'));const task_graph_creator_1=require(a8_0xb4f5('0x57'));const {output,workspaceRoot,getOutputs,Cache}=require(a8_0xb4f5('0x4'));class NoopLifeCycle{[a8_0xb4f5('0x3d')](_0x1fb6ca){}[a8_0xb4f5('0x3f')](_0x20f629){}[a8_0xb4f5('0x5c')](_0x193c94,_0x166024){}}function runDistributedExecution(_0x33668a,_0xddeb2f,_0x5f27f9,_0x5d6da8,_0x3efd60,_0x45b078,_0x56ec6a){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x42bb37=yield _0x33668a[a8_0xb4f5('0x30')]((0x0,distributed_execution_api_1[a8_0xb4f5('0xf')])(_0x45b078,(0x0,split_task_graph_into_stages_1[a8_0xb4f5('0x34')])(_0x56ec6a),_0xddeb2f));return yield processTasks(_0x33668a,_0x5d6da8,_0x3efd60,_0xddeb2f,_0x42bb37,Object[a8_0xb4f5('0x59')](_0x56ec6a['tasks']),_0x5f27f9);});}function processTasks(_0x48e03f,_0x4ea4ba,_0x458ab8,_0x44da25,_0x123766,_0x3408e6,_0x351055){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x71da3a={};const _0x5c7365=(0x0,create_unchanged_value_timeout_1['createUnchangedValueTimeout'])({'title':a8_0xb4f5('0x38')+environment_1[a8_0xb4f5('0x13')]/0x3e8+a8_0xb4f5('0x2'),'timeout':environment_1[a8_0xb4f5('0x13')]});const _0x4a703c=new waiter_1[(a8_0xb4f5('0x33'))]();while(!![]){if(environment_1[a8_0xb4f5('0x1c')]){output[a8_0xb4f5('0x2b')]({'title':a8_0xb4f5('0x67')});}yield _0x4a703c[a8_0xb4f5('0x15')]();const _0x6b5266=yield _0x48e03f[a8_0xb4f5('0x3c')](_0x123766);if(environment_1[a8_0xb4f5('0x1c')]){output[a8_0xb4f5('0x2b')]({'title':a8_0xb4f5('0x12'),'bodyLines':[a8_0xb4f5('0x5d')+_0x123766,a8_0xb4f5('0xa')+_0x6b5266[a8_0xb4f5('0x4b')],a8_0xb4f5('0x53')+_0x6b5266[a8_0xb4f5('0xb')][a8_0xb4f5('0x63')],a8_0xb4f5('0x5b')+_0x6b5266['criticalErrorMessage']]});}if(_0x6b5266[a8_0xb4f5('0x62')]){output[a8_0xb4f5('0x8')]({'title':a8_0xb4f5('0x2e'),'bodyLines':[a8_0xb4f5('0x11'),_0x6b5266[a8_0xb4f5('0x62')]]});process[a8_0xb4f5('0x60')](0x1);}_0x5c7365(_0x6b5266[a8_0xb4f5('0xb')][a8_0xb4f5('0x63')]);for(const _0x33495d of _0x6b5266[a8_0xb4f5('0xb')]){if(_0x71da3a[_0x33495d['taskId']])continue;yield processTask(_0x4ea4ba,_0x458ab8,_0x351055,_0x44da25,_0x3408e6,_0x33495d);_0x4a703c['reset']();_0x71da3a[_0x33495d[a8_0xb4f5('0x54')]]=!![];}if(_0x6b5266[a8_0xb4f5('0x4b')]==='COMPLETED'){return{'commandStatus':_0x6b5266[a8_0xb4f5('0x56')],'runUrl':_0x6b5266[a8_0xb4f5('0x3')]};}}});}function processTask(_0x575236,_0x5e7bb8,_0x486a35,_0x59006e,_0x19dd09,_0x2232ba){return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a8_0xb4f5('0x1c')]){output[a8_0xb4f5('0x2b')]({'title':'Processing\x20task\x20'+_0x2232ba['taskId']});}const _0x12ab92=_0x19dd09[a8_0xb4f5('0x5')](_0x2c6661=>_0x2232ba[a8_0xb4f5('0x54')]===_0x2c6661['id']);if(!_0x12ab92){throw new Error(a8_0xb4f5('0x9')+_0x2232ba['taskId']);}if(environment_1[a8_0xb4f5('0x1c')]){output[a8_0xb4f5('0x2b')]({'title':'Retrieving\x20artifacts\x20from\x20'+_0x2232ba[a8_0xb4f5('0x31')]});}yield _0x575236[a8_0xb4f5('0x50')](_0x2232ba[a8_0xb4f5('0x7')],_0x2232ba['url'],_0x59006e[a8_0xb4f5('0x4c')]||a8_0xb4f5('0x55'));const _0x1fa453=yield _0x5e7bb8[a8_0xb4f5('0x69')](Object[a8_0xb4f5('0x58')](Object[a8_0xb4f5('0x58')]({},_0x12ab92),{'hash':_0x2232ba[a8_0xb4f5('0x7')]}));const _0x245da4=getOutputs(_0x486a35[a8_0xb4f5('0x49')][a8_0xb4f5('0xc')],_0x12ab92);if(environment_1['VERBOSE_LOGGING']){output[a8_0xb4f5('0x2b')]({'title':a8_0xb4f5('0x2f'),'bodyLines':_0x245da4});}yield _0x5e7bb8[a8_0xb4f5('0x40')](_0x2232ba['hash'],_0x1fa453,_0x245da4);output[a8_0xb4f5('0x23')](getCommand(_0x12ab92));process['stdout']['write'](_0x1fa453[a8_0xb4f5('0x26')]);output[a8_0xb4f5('0x68')]();});}function getCommand(_0x35eef6){const _0x58a351=_0x35eef6[a8_0xb4f5('0x66')][a8_0xb4f5('0x1')]?':'+_0x35eef6['target'][a8_0xb4f5('0x1')]:'';return['nx',a8_0xb4f5('0x5f'),_0x35eef6[a8_0xb4f5('0x66')][a8_0xb4f5('0x35')]+':'+_0x35eef6['target'][a8_0xb4f5('0x66')]+_0x58a351,(0x0,serializer_overrides_1[a8_0xb4f5('0x45')])(_0x35eef6)]['join']('\x20');}function attachSignalListenersToCompleteRunGroupOnError(_0x181806,_0x3d26d0){process['on'](a8_0xb4f5('0x65'),()=>__awaiter(this,void 0x0,void 0x0,function*(){yield _0x181806['completeRunGroupWithError'](_0x3d26d0,a8_0xb4f5('0x1a'));process[a8_0xb4f5('0x60')](0x1);}));process['on'](a8_0xb4f5('0x18'),()=>__awaiter(this,void 0x0,void 0x0,function*(){yield _0x181806[a8_0xb4f5('0x14')](_0x3d26d0,a8_0xb4f5('0x19'));process['exit'](0x1);}));}const nxCloudDistributedTasksRunner=(_0xa8915e,_0x5203e0,_0x1280cb)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){if(environment_1[a8_0xb4f5('0x1c')]){output[a8_0xb4f5('0x2b')]({'title':a8_0xb4f5('0xd')});}_0x5203e0[a8_0xb4f5('0x22')]=new NoopLifeCycle();const _0x441d18=(0x0,environment_1[a8_0xb4f5('0x3b')])();if(!_0x441d18){(0x0,print_run_group_error_1[a8_0xb4f5('0x20')])();return process['exit'](0x1);}const _0x1cf7b0=new e2e_encryption_1[(a8_0xb4f5('0x39'))](environment_1[a8_0xb4f5('0x2d')]||_0x5203e0[a8_0xb4f5('0x2c')]);const _0xd45a15=new error_reporter_api_1[(a8_0xb4f5('0x28'))](_0x5203e0);const _0x249dff=new file_storage_1[(a8_0xb4f5('0x61'))](_0x1cf7b0,_0xd45a15,!![],![]);const _0x36c761=new Cache(_0x5203e0);const _0x213e62=new distributed_execution_api_1['DistributedExecutionApi'](_0x5203e0);attachSignalListenersToCompleteRunGroupOnError(_0x213e62,_0x441d18);try{const _0x37797d=getTaskGraph(_0x1280cb,_0xa8915e,_0x5203e0);const _0x4f6920=yield runDistributedExecution(_0x213e62,_0x5203e0,_0x1280cb,_0x249dff,_0x36c761,_0x441d18,_0x37797d);if(_0x4f6920[a8_0xb4f5('0x56')]===0x0){output[a8_0xb4f5('0x25')]({'title':a8_0xb4f5('0x17'),'bodyLines':[a8_0xb4f5('0x24')+_0x4f6920[a8_0xb4f5('0x3')]]});}else{output['error']({'title':a8_0xb4f5('0x27'),'bodyLines':['See\x20run\x20details\x20at\x20'+_0x4f6920[a8_0xb4f5('0x3')]]});}yield(0x0,metric_logger_1[a8_0xb4f5('0x16')])(_0x5203e0);process[a8_0xb4f5('0x60')](_0x4f6920[a8_0xb4f5('0x56')]);}catch(_0x431687){output[a8_0xb4f5('0x8')]({'title':a8_0xb4f5('0x4a'),'bodyLines':[_0x431687['message']]});if(_0x431687[a8_0xb4f5('0x41')]){console[a8_0xb4f5('0x10')](_0x431687['axiosException']);}else{console['log'](_0x431687);}try{yield _0x213e62['completeRunGroupWithError'](_0x441d18,a8_0xb4f5('0x51')+_0x431687[a8_0xb4f5('0x5e')]+'\x22');}finally{process[a8_0xb4f5('0x60')](0x1);}}});exports[a8_0xb4f5('0x48')]=nxCloudDistributedTasksRunner;function getTaskGraph(_0x480234,_0x42d273,_0x489b53){if(_0x480234[a8_0xb4f5('0x3e')]){return _0x480234[a8_0xb4f5('0x3e')];}else{const _0x29bd30=JSON['parse'](stripJsonComments((0x0,fs_1['readFileSync'])(workspaceRoot+'/nx.json')[a8_0xb4f5('0x43')]()));return new task_graph_creator_1[(a8_0xb4f5('0x1b'))](_0x480234[a8_0xb4f5('0x49')],getDefaultDependencyConfigs(_0x29bd30,_0x489b53))['createTaskGraph'](_0x42d273);}}function getDefaultDependencyConfigs(_0x204b39,_0x581496){var _0x264997,_0x423245;const _0x3d2bd0=(_0x264997=_0x204b39[a8_0xb4f5('0x2a')])!==null&&_0x264997!==void 0x0?_0x264997:{};const _0x50528c=_0x581496?(_0x423245=_0x581496[a8_0xb4f5('0x5a')])!==null&&_0x423245!==void 0x0?_0x423245:[a8_0xb4f5('0x32')]:[];for(const _0x269d2f of _0x50528c){_0x3d2bd0[_0x269d2f]=_0x3d2bd0[_0x269d2f]||[];_0x3d2bd0[_0x269d2f][a8_0xb4f5('0xe')]({'target':_0x269d2f,'projects':a8_0xb4f5('0x4d')});}return _0x3d2bd0;}