const a2_0x17d6=['hash','cacheError','storeRequests','__awaiter','apply','scheduledTasks','put','resolve','filter','cache-miss','VERBOSE_LOGGING','NX_CLOUD_DISTRIBUTED_EXECUTION_ID','Nx\x20Cloud:\x20Skipping\x20storing\x20','throw','waitForStoreRequestsToComplete','fileStorage','../../../utilities/nx-imports','push','done','runContext','reduce','.\x20Status\x20404.','__esModule','axiosException','store','storage','defineProperty','retrieve','then','all','get','requests','response','messages','note','next','statuses','.\x20Read\x20only\x20token\x20is\x20used.','remote-cache-hit','api','CloudRemoteCache','extractErrorMessage','hashUrls','status','value'];(function(_0x109814,_0x17d68a){const _0x4a3e2e=function(_0x22a28d){while(--_0x22a28d){_0x109814['push'](_0x109814['shift']());}};_0x4a3e2e(++_0x17d68a);}(a2_0x17d6,0xa9));const a2_0x4a3e=function(_0x109814,_0x17d68a){_0x109814=_0x109814-0x0;let _0x4a3e2e=a2_0x17d6[_0x109814];return _0x4a3e2e;};'use strict';var __awaiter=this&&this[a2_0x4a3e('0xe')]||function(_0x5916bd,_0x4527b5,_0x124f03,_0x22bf37){function _0x3521c7(_0x521e51){return _0x521e51 instanceof _0x124f03?_0x521e51:new _0x124f03(function(_0x17d05e){_0x17d05e(_0x521e51);});}return new(_0x124f03||(_0x124f03=Promise))(function(_0x1f3895,_0xd996f5){function _0x5ef8ab(_0x1f6169){try{_0x5b824b(_0x22bf37[a2_0x4a3e('0x1')](_0x1f6169));}catch(_0x1878db){_0xd996f5(_0x1878db);}}function _0x5559f5(_0x154137){try{_0x5b824b(_0x22bf37[a2_0x4a3e('0x18')](_0x154137));}catch(_0x493c67){_0xd996f5(_0x493c67);}}function _0x5b824b(_0x5c5b7d){_0x5c5b7d[a2_0x4a3e('0x1d')]?_0x1f3895(_0x5c5b7d[a2_0x4a3e('0xa')]):_0x3521c7(_0x5c5b7d[a2_0x4a3e('0xa')])['then'](_0x5ef8ab,_0x5559f5);}_0x5b824b((_0x22bf37=_0x22bf37[a2_0x4a3e('0xf')](_0x5916bd,_0x4527b5||[]))[a2_0x4a3e('0x1')]());});};Object[a2_0x4a3e('0x25')](exports,a2_0x4a3e('0x21'),{'value':!![]});exports[a2_0x4a3e('0x6')]=void 0x0;const environment_1=require('../../../utilities/environment');const {output}=require(a2_0x4a3e('0x1b'));class CloudRemoteCache{constructor(_0x21dfcb,_0x258fc5,_0x519583,_0x531032){this['messages']=_0x21dfcb;this[a2_0x4a3e('0x5')]=_0x258fc5;this['runContext']=_0x519583;this[a2_0x4a3e('0x1a')]=_0x531032;this[a2_0x4a3e('0xd')]=[];}['retrieve'](_0xb1c7b4,_0x2fd4b2){var _0x335838;return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x4a3e('0x2c')][a2_0x4a3e('0xc')])return![];const _0x2e39c6=yield this['hashUrls'](_0xb1c7b4);if(!_0x2e39c6||!_0x2e39c6[a2_0x4a3e('0x29')]){if(environment_1[a2_0x4a3e('0x15')]){output[a2_0x4a3e('0x0')]({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0xb1c7b4+'.'});}this[a2_0x4a3e('0x1e')][a2_0x4a3e('0x2')][_0xb1c7b4]=a2_0x4a3e('0x14');return![];}try{yield this[a2_0x4a3e('0x1a')][a2_0x4a3e('0x26')](_0xb1c7b4,_0x2e39c6['get'],_0x2fd4b2);this[a2_0x4a3e('0x1e')][a2_0x4a3e('0x2')][_0xb1c7b4]=a2_0x4a3e('0x4');return!![];}catch(_0x5a0fd6){const _0x201ad1=(_0x335838=_0x5a0fd6[a2_0x4a3e('0x22')])!==null&&_0x335838!==void 0x0?_0x335838:_0x5a0fd6;if(_0x201ad1[a2_0x4a3e('0x2b')]&&_0x201ad1[a2_0x4a3e('0x2b')][a2_0x4a3e('0x9')]===0x194){if(environment_1[a2_0x4a3e('0x15')]){output[a2_0x4a3e('0x0')]({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0xb1c7b4+a2_0x4a3e('0x20')});}}else{this['messages'][a2_0x4a3e('0xc')]=this['messages'][a2_0x4a3e('0x7')](_0x201ad1,a2_0x4a3e('0x24'));}this[a2_0x4a3e('0x1e')]['statuses'][_0xb1c7b4]='cache-miss';return![];}});}[a2_0x4a3e('0x23')](_0x36ac91,_0xeaeae8){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x4a3e('0x2c')][a2_0x4a3e('0xc')])return![];const _0x2d1e0a=Promise[a2_0x4a3e('0x12')]()[a2_0x4a3e('0x27')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x2bd9e2;const _0x98105e=yield this[a2_0x4a3e('0x8')](_0x36ac91);if(!_0x98105e)return![];if(!_0x98105e[a2_0x4a3e('0x11')]){if(environment_1[a2_0x4a3e('0x15')]){output['note']({'title':a2_0x4a3e('0x17')+_0x36ac91+a2_0x4a3e('0x3')});}return!![];}try{yield this[a2_0x4a3e('0x1a')][a2_0x4a3e('0x23')](_0x36ac91,_0x98105e[a2_0x4a3e('0x11')],_0xeaeae8);return!![];}catch(_0x43ed3d){const _0x26e74f=(_0x2bd9e2=_0x43ed3d[a2_0x4a3e('0x22')])!==null&&_0x2bd9e2!==void 0x0?_0x2bd9e2:_0x43ed3d;this[a2_0x4a3e('0x2c')][a2_0x4a3e('0xc')]=this[a2_0x4a3e('0x2c')]['extractErrorMessage'](_0x26e74f,a2_0x4a3e('0x24'));return![];}}));this[a2_0x4a3e('0xd')][a2_0x4a3e('0x1c')](_0x2d1e0a);return _0x2d1e0a;});}[a2_0x4a3e('0x8')](_0x1e9dc1){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x1e9dc1 in this['runContext'][a2_0x4a3e('0x2a')]){return(yield this[a2_0x4a3e('0x1e')][a2_0x4a3e('0x2a')][_0x1e9dc1])[_0x1e9dc1];}else{const _0x2e62a9=this[a2_0x4a3e('0x1e')][a2_0x4a3e('0x10')][a2_0x4a3e('0x13')](_0x27f740=>!this[a2_0x4a3e('0x1e')][a2_0x4a3e('0x2a')][_0x27f740[a2_0x4a3e('0xb')]])['map'](_0x52aabc=>_0x52aabc[a2_0x4a3e('0xb')]);if(_0x2e62a9['indexOf'](_0x1e9dc1)===-0x1){_0x2e62a9[a2_0x4a3e('0x1c')](_0x1e9dc1);}const _0x4d06a8=this[a2_0x4a3e('0x5')]['startRun'](environment_1[a2_0x4a3e('0x16')],_0x2e62a9);_0x2e62a9['forEach'](_0x5e58e4=>{this[a2_0x4a3e('0x1e')][a2_0x4a3e('0x2a')][_0x5e58e4]=_0x4d06a8;});return(yield _0x4d06a8)[_0x1e9dc1];}});}[a2_0x4a3e('0x19')](){return Promise[a2_0x4a3e('0x28')](this[a2_0x4a3e('0xd')])[a2_0x4a3e('0x27')](_0x70b97f=>_0x70b97f[a2_0x4a3e('0x1f')]((_0x1afaab,_0x160da1)=>_0x1afaab&&_0x160da1,!![]));}}exports[a2_0x4a3e('0x6')]=CloudRemoteCache;